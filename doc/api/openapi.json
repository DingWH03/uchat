{"openapi":"3.1.0","info":{"title":"uchat-server","description":"","contact":{"name":"DingVero","email":"DingVero@outlook.com"},"license":{"name":""},"version":"1.0.0"},"paths":{"/":{"get":{"tags":["测试接口"],"operationId":"handle_request","responses":{"200":{"description":"成功响应","content":{"text/plain":{"schema":{"type":"string"}}}}}}},"/auth/check_session":{"get":{"tags":["request/auth"],"summary":"会话有效性检查接口","description":"检查客户端当前 Cookie 中的 `session_id` 是否有效，并返回用户的身份角色。\n通常用于客户端启动后自动判断是否已登录或会话是否过期。\n\n### 用法示例\n- 请求方式：`GET /check_session`\n- 请求头中需携带 Cookie：`session_id=...`\n- 返回：\n  - `status: true` 表示登录状态有效\n  - `data`: 用户的角色（如 User、Admin、Invalid）\n\n若未携带 Cookie 或会话已失效，将返回 `status: false` 和 `data: null`。","operationId":"handle_check_session","responses":{"200":{"description":"会话有效","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_RoleType"}}}},"401":{"description":"会话无效","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/auth/login":{"post":{"tags":["request/auth"],"summary":"登陆处理函数","operationId":"handle_login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"登陆成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_String"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器内部错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/auth/logout":{"post":{"tags":["request/auth"],"summary":"处理退出登录","operationId":"handle_logout","responses":{"200":{"description":"退出登录成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器内部错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/auth/password":{"post":{"tags":["request/auth"],"summary":"修改密码处理函数","operationId":"handle_passwd","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordRequest"}}},"required":true},"responses":{"200":{"description":"修改密码成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"400":{"description":"密码格式错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"401":{"description":"原密码错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器内部错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/auth/register":{"post":{"tags":["request/auth"],"summary":"注册处理函数","operationId":"handle_register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"注册成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_u32"}}}},"400":{"description":"用户名或密码格式错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器内部错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/auth/ws":{"get":{"tags":["request/auth"],"summary":"处理WebSocket升级请求\n签名已调整为标准的WebSocket升级处理器，并从 Cookie 中提取 session_id","operationId":"handle_connect","responses":{"101":{"description":"WebSocket 协议升级成功"},"401":{"description":"认证失败，缺少或非法 session_id Cookie"}}}},"/friend/add":{"post":{"tags":["request/friend"],"summary":"添加好友","operationId":"handle_add_friend","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FriendRequest"}}},"required":true},"responses":{"200":{"description":"添加成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"400":{"description":"目标用户不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/friend/info":{"get":{"tags":["request/friend"],"summary":"查看friend详细信息","operationId":"handle_info_friend","parameters":[{"name":"id","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"获取个人信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_UserDetailedInfo"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/friend/list":{"get":{"tags":["request/friend"],"summary":"获取好友列表","operationId":"handle_list_friend","responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Vec_UserSimpleInfo"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/friend/listv2":{"get":{"tags":["request/friend"],"summary":"获取好友列表(带状态信息)","operationId":"handle_list_friend_with_status","responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Vec_UserSimpleInfoWithStatus"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/friend/status":{"post":{"tags":["request/friend"],"summary":"使用好友id批量查询好友在线情况","operationId":"handle_get_status_by_userid","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckStatusRequest"}}},"required":true},"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Vec_UserStatus"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/group/info":{"get":{"tags":["request/group"],"summary":"获取群组信息","operationId":"handle_info_group","parameters":[{"name":"id","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_GroupDetailedInfo"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"404":{"description":"找不到群组","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/group/join":{"post":{"tags":["request/group"],"summary":"加入群组","operationId":"handle_join_group","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupRequest"}}},"required":true},"responses":{"200":{"description":"加入成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"400":{"description":"找不到群组","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/group/leave":{"post":{"tags":["request/group"],"summary":"离开群组","operationId":"handle_leave_group","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupRequest"}}},"required":true},"responses":{"200":{"description":"离开成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"400":{"description":"错误请求","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/group/list":{"get":{"tags":["request/group"],"summary":"获取群组列表","operationId":"handle_list_group","responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Vec_GroupSimpleInfo"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/group/members":{"get":{"tags":["request/group"],"summary":"获取群组成员","operationId":"handle_members_group","parameters":[{"name":"id","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_UserSimpleInfo"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"404":{"description":"找不到群组","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/group/new":{"post":{"tags":["request/group"],"summary":"创建群组","operationId":"handle_creat_group","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateGroupRequest"}}},"required":true},"responses":{"200":{"description":"创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_u32"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/manager/message/privite":{"get":{"tags":["manager/message"],"summary":"依据message_id获取某消息","operationId":"handle_get_message","parameters":[{"name":"message_id","in":"query","required":true,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_FullPrivateMessage"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"403":{"description":"权限不足","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}}}},"delete":{"tags":["manager/message"],"summary":"依据message_id删除某消息","operationId":"handle_delete_message","parameters":[{"name":"message_id","in":"query","required":true,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"删除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_u64"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"403":{"description":"权限不足","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}}}}},"/manager/message/privite/recent":{"get":{"tags":["manager/message"],"summary":"查看服务器近期消息","operationId":"handle_get_recent_messages","parameters":[{"name":"count","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"offset","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Vec_PreviewPrivateMessage"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"403":{"description":"权限不足","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}}}}},"/manager/message/privite/user":{"get":{"tags":["manager/message"],"summary":"查看某用户近期消息","operationId":"handle_get_user_recent_messages","parameters":[{"name":"count","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"offset","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"user_id","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Vec_PreviewPrivateMessage"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"403":{"description":"权限不足","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}}}}},"/manager/online/session":{"delete":{"tags":["manager/online"],"summary":"删除某session_id","operationId":"handle_delete_session","parameters":[{"name":"session_id","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"删除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"403":{"description":"权限不足","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}}}}},"/manager/online/tree":{"get":{"tags":["manager/online"],"operationId":"handle_tree_online","responses":{"200":{"description":"返回在线用户树","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_OnlineUserTree"}}}},"401":{"description":"未登陆","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"403":{"description":"权限不足(需管理员权限)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}}}}},"/manager/user":{"delete":{"tags":["manager/user"],"summary":"指定删除某用户","operationId":"handle_delete_user","parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"删除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"403":{"description":"权限不足","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}}}}},"/manager/user/count":{"get":{"tags":["manager/user"],"summary":"获取注册总用户数量","operationId":"handle_user_get_count","responses":{"200":{"description":"返回用户总数","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_u32"}}}},"401":{"description":"未登陆","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"403":{"description":"权限不足(需管理员权限)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}}}}},"/manager/user/detail":{"get":{"tags":["manager/user"],"summary":"查看某用户详细个人信息","operationId":"handle_get_userinfo","parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_UserDetailedInfo"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"403":{"description":"权限不足","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}}}}},"/manager/user/friend":{"get":{"tags":["manager/user"],"summary":"查看某用户所有好友","operationId":"handle_get_friends","parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Vec_UserSimpleInfo"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"403":{"description":"权限不足","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}}}},"delete":{"tags":["manager/user"],"summary":"指定删除某好友关系","operationId":"handle_delete_friendship","parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"friend_id","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"删除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"403":{"description":"权限不足","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}}}}},"/manager/user/list":{"get":{"tags":["manager/user"],"summary":"获取注册总用户列表","operationId":"handle_list_user","responses":{"200":{"description":"返回用户列表","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Vec_ManagerUserSimpleInfo"}}}},"401":{"description":"未登陆","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}},"403":{"description":"权限不足(需管理员权限)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerResponse_Empty"}}}}}}},"/manager/user/role":{"post":{"tags":["manager/user"],"summary":"更改用户身份","operationId":"handle_change_role","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeRoleRequest"}}},"required":true},"responses":{"200":{"description":"更改身份成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"400":{"description":"目标身份不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器内部错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/message/group":{"get":{"tags":["request/message"],"summary":"获取群聊聊天记录","operationId":"handle_get_group_message","parameters":[{"name":"id","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"offset","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Vec_SessionMessage"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"404":{"description":"找不到群组","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/message/group/after":{"get":{"tags":["request/message"],"summary":"获取当前用户所有群中某时间之后的消息（带群 ID）","operationId":"handle_get_all_group_messages_after_timestamp","parameters":[{"name":"timestamp","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Vec_IdMessagePair"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/message/group/latest":{"get":{"tags":["request/message"],"summary":"获取当前用户所在所有群的最后一条消息时间戳（Map）","operationId":"handle_get_latest_timestamps_of_all_groups","responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_HashMap_u32_i64"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/message/group/max":{"get":{"tags":["request/message"],"summary":"获取当前用户所有群聊中最新的一条消息时间戳（全局最大）","operationId":"handle_get_latest_timestamp_of_all_group_messages","responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Option_i64"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/message/group/{group_id}/after":{"get":{"tags":["request/message"],"summary":"获取某个群某时间之后的消息","operationId":"handle_get_group_messages_after_timestamp","parameters":[{"name":"group_id","in":"path","description":"群组ID","required":true,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"timestamp","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Vec_SessionMessage"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"404":{"description":"群组不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/message/group/{group_id}/latest":{"get":{"tags":["request/message"],"summary":"获取某个群聊的最后一条消息时间戳","operationId":"handle_get_latest_timestamp_of_group","parameters":[{"name":"group_id","in":"path","description":"群组ID","required":true,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Option_i64"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"404":{"description":"群组不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/message/user":{"get":{"tags":["request/message"],"summary":"获取私聊聊天记录","operationId":"handle_get_session_message","parameters":[{"name":"id","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"offset","in":"query","required":true,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Vec_SessionMessage"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"404":{"description":"找不到群组","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/message/user/after":{"get":{"tags":["request/message"],"summary":"获取所有私聊中某时间之后的所有聊天记录（带对方 ID）","operationId":"handle_get_all_private_messages_after_timestamp","parameters":[{"name":"timestamp","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Vec_IdMessagePair"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/message/user/latest":{"get":{"tags":["request/message"],"summary":"获取当前用户所有私聊的最后一条消息时间戳（按好友ID映射）","operationId":"handle_get_latest_timestamps_of_all_private_chats","responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_HashMap_u32_i64"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/message/user/max":{"get":{"tags":["request/message"],"summary":"获取当前用户所有私聊中全局最新的一条消息时间戳","operationId":"handle_get_latest_timestamp_of_all_private_messages","responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Option_i64"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/message/user/{friend_id}/after":{"get":{"tags":["request/message"],"summary":"获取与某个用户某时间之后的聊天记录（时间递增）","operationId":"handle_get_private_messages_after_timestamp","parameters":[{"name":"friend_id","in":"path","description":"好友ID","required":true,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"timestamp","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Vec_SessionMessage"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/message/user/{friend_id}/latest":{"get":{"tags":["request/message"],"summary":"获取与某个用户的最后一条私聊消息时间戳","operationId":"handle_get_latest_timestamp_with_user","parameters":[{"name":"friend_id","in":"path","description":"好友ID","required":true,"schema":{"type":"integer","format":"int32","minimum":0}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Option_i64"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/ping":{"get":{"tags":["测试接口"],"operationId":"ping","responses":{"200":{"description":"成功响应","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/user/avatar":{"post":{"tags":["request/user"],"summary":"上传头像（multipart 文件）\n返回上传后的头像 URL","operationId":"handle_upload_avatar","requestBody":{"description":"头像文件","content":{"multipart/form-data":{}}},"responses":{"200":{"description":"头像上传成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_String"}}}},"400":{"description":"上传失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/user/contact/list":{"get":{"tags":["request/user"],"summary":"查询用户的好友和群组列表，相当于同时调用list_friend和list_group","operationId":"handle_get_contact_list","responses":{"200":{"description":"获取完整好友列表，不支持状态信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_ContactList"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/user/contact/timestamps":{"get":{"tags":["request/user"],"summary":"查询用户的好友和群组更新时间戳(单位：秒)","operationId":"handle_get_contact_timestamps","responses":{"200":{"description":"获取好友和群组列表最新时间戳","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_UpdateTimestamps"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}},"/user/me":{"get":{"tags":["request/user"],"summary":"获取个人信息","operationId":"handle_get_me","responses":{"200":{"description":"获取个人信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_UserDetailedInfo"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}},"put":{"tags":["request/user"],"summary":"完整更新个人资料","operationId":"handle_put_me","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserRequest"}}},"required":true},"responses":{"200":{"description":"完整更新个人资料","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}},"delete":{"tags":["request/user"],"summary":"删除自己账号","operationId":"handle_delete_me","responses":{"200":{"description":"删除自己的账号(依据session_id)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}},"patch":{"tags":["request/user"],"summary":"部分修改个人资料","operationId":"handle_patch_me","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatchUserRequest"}}},"required":true},"responses":{"200":{"description":"部分修改个人资料","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}},"401":{"description":"认证失败","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestResponse_Empty"}}}}}}}},"components":{"schemas":{"ChangeRoleRequest":{"type":"object","required":["user_id","new_role"],"properties":{"new_role":{"$ref":"#/components/schemas/RoleType"},"user_id":{"type":"integer","format":"int32","minimum":0}}},"CheckStatusRequest":{"type":"object","required":["user_ids"],"properties":{"user_ids":{"type":"array","items":{"type":"integer","format":"int32","minimum":0}}}},"ContactList":{"type":"object","required":["friends","groups"],"properties":{"friends":{"type":"array","items":{"$ref":"#/components/schemas/UserSimpleInfo"}},"groups":{"type":"array","items":{"$ref":"#/components/schemas/GroupSimpleInfo"}}}},"CreateGroupRequest":{"type":"object","required":["group_name","members"],"properties":{"group_name":{"type":"string"},"members":{"type":"array","items":{"type":"integer","format":"int32","minimum":0}}}},"Empty":{"default":null},"FriendRequest":{"type":"object","required":["id"],"properties":{"id":{"type":"integer","format":"int32","minimum":0}}},"FullPrivateMessage":{"type":"object","required":["id","sender_id","sender_username","receiver_id","receiver_username","message_type","message","timestamp"],"properties":{"id":{"type":"integer","format":"int32","minimum":0},"message":{"type":"string"},"message_type":{"$ref":"#/components/schemas/MessageType"},"receiver_id":{"type":"integer","format":"int32","minimum":0},"receiver_username":{"type":"string"},"sender_id":{"type":"integer","format":"int32","minimum":0},"sender_username":{"type":"string"},"timestamp":{"type":"integer","format":"int64"}}},"GroupDetailedInfo":{"type":"object","required":["group_id","title"],"properties":{"group_id":{"type":"integer","format":"int32","minimum":0},"title":{"type":"string"}}},"GroupRequest":{"type":"object","required":["id"],"properties":{"id":{"type":"integer","format":"int32","minimum":0}}},"GroupSimpleInfo":{"type":"object","required":["group_id","title"],"properties":{"group_id":{"type":"integer","format":"int32","minimum":0},"title":{"type":"string"}}},"IdMessagePair":{"type":"object","required":["id","message"],"properties":{"id":{"type":"integer","format":"int32","description":"对方用户ID 或 群聊ID","minimum":0},"message":{"$ref":"#/components/schemas/SessionMessage"}}},"LoginRequest":{"type":"object","required":["userid","password"],"properties":{"password":{"type":"string"},"userid":{"type":"integer","format":"int32","minimum":0}}},"ManagerResponse_Empty":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"default":null},"message":{"type":"string"},"status":{"type":"boolean"}}},"ManagerResponse_FullPrivateMessage":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"object","required":["id","sender_id","sender_username","receiver_id","receiver_username","message_type","message","timestamp"],"properties":{"id":{"type":"integer","format":"int32","minimum":0},"message":{"type":"string"},"message_type":{"$ref":"#/components/schemas/MessageType"},"receiver_id":{"type":"integer","format":"int32","minimum":0},"receiver_username":{"type":"string"},"sender_id":{"type":"integer","format":"int32","minimum":0},"sender_username":{"type":"string"},"timestamp":{"type":"integer","format":"int64"}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"ManagerResponse_OnlineUserTree":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"object","required":["users"],"properties":{"users":{"type":"object","additionalProperties":{"type":"array","items":{"$ref":"#/components/schemas/UserSessionInfo"}},"propertyNames":{"type":"integer","format":"int32","minimum":0}}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"ManagerResponse_UserDetailedInfo":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"object","required":["user_id","username","role"],"properties":{"avatar_url":{"type":["string","null"]},"role":{"$ref":"#/components/schemas/RoleType"},"user_id":{"type":"integer","format":"int32","minimum":0},"username":{"type":"string"}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"ManagerResponse_Vec_ManagerUserSimpleInfo":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"array","items":{"type":"object","required":["user_id","username","role"],"properties":{"role":{"$ref":"#/components/schemas/RoleType"},"user_id":{"type":"integer","format":"int32","minimum":0},"username":{"type":"string"}}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"ManagerResponse_Vec_PreviewPrivateMessage":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"array","items":{"type":"object","description":"用于manager后台获取消息","required":["id","sender_id","sender_username","receiver_id","receiver_username","message_type","message_preview","timestamp"],"properties":{"id":{"type":"integer","format":"int32","minimum":0},"message_preview":{"type":"string"},"message_type":{"$ref":"#/components/schemas/MessageType"},"receiver_id":{"type":"integer","format":"int32","minimum":0},"receiver_username":{"type":"string"},"sender_id":{"type":"integer","format":"int32","minimum":0},"sender_username":{"type":"string"},"timestamp":{"type":"integer","format":"int64"}}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"ManagerResponse_Vec_UserSimpleInfo":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"array","items":{"type":"object","required":["user_id","username","avatar_url"],"properties":{"avatar_url":{"type":"string"},"user_id":{"type":"integer","format":"int32","minimum":0},"username":{"type":"string"}}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"ManagerResponse_u32":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"integer","format":"int32","minimum":0},"message":{"type":"string"},"status":{"type":"boolean"}}},"ManagerResponse_u64":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"integer","format":"int64","minimum":0},"message":{"type":"string"},"status":{"type":"boolean"}}},"ManagerUserSimpleInfo":{"type":"object","required":["user_id","username","role"],"properties":{"role":{"$ref":"#/components/schemas/RoleType"},"user_id":{"type":"integer","format":"int32","minimum":0},"username":{"type":"string"}}},"MessageType":{"type":"string","enum":["text","image","file","video","audio"]},"OnlineUserTree":{"type":"object","required":["users"],"properties":{"users":{"type":"object","additionalProperties":{"type":"array","items":{"$ref":"#/components/schemas/UserSessionInfo"}},"propertyNames":{"type":"integer","format":"int32","minimum":0}}}},"PasswordRequest":{"type":"object","required":["user_id","old_password","new_password"],"properties":{"new_password":{"type":"string"},"old_password":{"type":"string"},"user_id":{"type":"integer","format":"int32","minimum":0}}},"PatchUserRequest":{"type":"object","properties":{"username":{"type":["string","null"]}}},"PreviewPrivateMessage":{"type":"object","description":"用于manager后台获取消息","required":["id","sender_id","sender_username","receiver_id","receiver_username","message_type","message_preview","timestamp"],"properties":{"id":{"type":"integer","format":"int32","minimum":0},"message_preview":{"type":"string"},"message_type":{"$ref":"#/components/schemas/MessageType"},"receiver_id":{"type":"integer","format":"int32","minimum":0},"receiver_username":{"type":"string"},"sender_id":{"type":"integer","format":"int32","minimum":0},"sender_username":{"type":"string"},"timestamp":{"type":"integer","format":"int64"}}},"RegisterRequest":{"type":"object","required":["username","password"],"properties":{"password":{"type":"string"},"username":{"type":"string"}}},"RequestResponse_ContactList":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"object","required":["friends","groups"],"properties":{"friends":{"type":"array","items":{"$ref":"#/components/schemas/UserSimpleInfo"}},"groups":{"type":"array","items":{"$ref":"#/components/schemas/GroupSimpleInfo"}}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_Empty":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"default":null},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_GroupDetailedInfo":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"object","required":["group_id","title"],"properties":{"group_id":{"type":"integer","format":"int32","minimum":0},"title":{"type":"string"}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_HashMap_u32_i64":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"object","additionalProperties":{"type":"integer","format":"int64"},"propertyNames":{"type":"integer","format":"int32","minimum":0}},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_Option_i64":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"oneOf":[{"type":"null"},{"type":"integer","format":"int64"}]},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_RoleType":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"string","enum":["User","Admin","Invalid"]},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_String":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"string"},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_UpdateTimestamps":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"object","required":["friends_updated_at","groups_updated_at"],"properties":{"friends_updated_at":{"type":"integer","format":"int64"},"groups_updated_at":{"type":"integer","format":"int64"}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_UserDetailedInfo":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"object","required":["user_id","username","role"],"properties":{"avatar_url":{"type":["string","null"]},"role":{"$ref":"#/components/schemas/RoleType"},"user_id":{"type":"integer","format":"int32","minimum":0},"username":{"type":"string"}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_UserSimpleInfo":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"object","required":["user_id","username","avatar_url"],"properties":{"avatar_url":{"type":"string"},"user_id":{"type":"integer","format":"int32","minimum":0},"username":{"type":"string"}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_Vec_GroupSimpleInfo":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"array","items":{"type":"object","required":["group_id","title"],"properties":{"group_id":{"type":"integer","format":"int32","minimum":0},"title":{"type":"string"}}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_Vec_IdMessagePair":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"array","items":{"type":"object","required":["id","message"],"properties":{"id":{"type":"integer","format":"int32","description":"对方用户ID 或 群聊ID","minimum":0},"message":{"$ref":"#/components/schemas/SessionMessage"}}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_Vec_SessionMessage":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"array","items":{"type":"object","required":["message_id","message_type","sender_id","message","timestamp"],"properties":{"message":{"type":"string"},"message_id":{"type":"integer","format":"int32","minimum":0},"message_type":{"$ref":"#/components/schemas/MessageType"},"sender_id":{"type":"integer","format":"int32","minimum":0},"timestamp":{"type":"integer","format":"int64"}}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_Vec_UserSimpleInfo":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"array","items":{"type":"object","required":["user_id","username","avatar_url"],"properties":{"avatar_url":{"type":"string"},"user_id":{"type":"integer","format":"int32","minimum":0},"username":{"type":"string"}}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_Vec_UserSimpleInfoWithStatus":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"array","items":{"type":"object","required":["base","online"],"properties":{"base":{"$ref":"#/components/schemas/UserSimpleInfo"},"online":{"type":"boolean"}}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_Vec_UserStatus":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"array","items":{"type":"object","required":["user_id","online"],"properties":{"online":{"type":"boolean"},"user_id":{"type":"integer","format":"int32","minimum":0}}}},"message":{"type":"string"},"status":{"type":"boolean"}}},"RequestResponse_u32":{"type":"object","required":["status","code","message"],"properties":{"code":{"type":"integer","format":"int32","minimum":0},"data":{"type":"integer","format":"int32","minimum":0},"message":{"type":"string"},"status":{"type":"boolean"}}},"RoleType":{"type":"string","enum":["User","Admin","Invalid"]},"SessionMessage":{"type":"object","required":["message_id","message_type","sender_id","message","timestamp"],"properties":{"message":{"type":"string"},"message_id":{"type":"integer","format":"int32","minimum":0},"message_type":{"$ref":"#/components/schemas/MessageType"},"sender_id":{"type":"integer","format":"int32","minimum":0},"timestamp":{"type":"integer","format":"int64"}}},"UpdateTimestamps":{"type":"object","required":["friends_updated_at","groups_updated_at"],"properties":{"friends_updated_at":{"type":"integer","format":"int64"},"groups_updated_at":{"type":"integer","format":"int64"}}},"UpdateUserRequest":{"type":"object","required":["username"],"properties":{"username":{"type":"string"}}},"UserDetailedInfo":{"type":"object","required":["user_id","username","role"],"properties":{"avatar_url":{"type":["string","null"]},"role":{"$ref":"#/components/schemas/RoleType"},"user_id":{"type":"integer","format":"int32","minimum":0},"username":{"type":"string"}}},"UserSessionInfo":{"type":"object","required":["session_id","user_id","created_at"],"properties":{"created_at":{"type":"string","example":"2025-06-20T15:30:00"},"ip":{"type":["string","null"]},"session_id":{"type":"string"},"user_id":{"type":"integer","format":"int32","minimum":0}}},"UserSimpleInfo":{"type":"object","required":["user_id","username","avatar_url"],"properties":{"avatar_url":{"type":"string"},"user_id":{"type":"integer","format":"int32","minimum":0},"username":{"type":"string"}}},"UserSimpleInfoWithStatus":{"type":"object","required":["base","online"],"properties":{"base":{"$ref":"#/components/schemas/UserSimpleInfo"},"online":{"type":"boolean"}}},"UserStatus":{"type":"object","required":["user_id","online"],"properties":{"online":{"type":"boolean"},"user_id":{"type":"integer","format":"int32","minimum":0}}}}},"tags":[{"name":"测试接口","description":"仅用来测试对http的请求是否正常"},{"name":"request/auth","description":"常规api：账号注册与身份认证"},{"name":"request/friend","description":"常规api：好友"},{"name":"request/group","description":"常规api：群组"},{"name":"request/message","description":"常规api：聊天记录"},{"name":"request/user","description":"常规api：个人信息"},{"name":"manager/message","description":"后台管理：聊天记录"},{"name":"manager/online","description":"后台管理：在线用户与会话"},{"name":"manager/user","description":"后台管理：用户"}]}